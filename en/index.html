<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CSV 영문 단어 가리기 퀴즈</title>
    <style>
        :root {
            --bg: #0f172a;
            --muted: #94a3b8;
            --text: #e5e7eb;
            --good: #34d399;
            --bad: #f87171;
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
        }

        .wrap {
            max-width: 1000px;
            margin: 0 auto;
            padding: 24px
        }

        .card {
            background: #0b1220;
            border: 1px solid #1f2937;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, .35);
        }

        h1 {
            font-size: 28px;
            margin: 0 0 14px
        }

        p.sub {
            margin: 0 0 18px;
            color: var(--muted)
        }

        .grid {
            display: grid;
            gap: 16px
        }

        .g2 {
            grid-template-columns: 1fr 1fr
        }

        .row {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap
        }

        input[type="file"] {
            padding: 8px 10px;
            background: #0b1220;
            border: 1px dashed #334155;
            border-radius: 12px;
            color: var(--muted)
        }

        button {
            appearance: none;
            border: none;
            padding: 10px 14px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            background: #1f2937;
            color: #e5e7eb;
            border: 1px solid #374151
        }

        button.primary {
            background: linear-gradient(180deg, #2563eb, #1d4ed8);
            border-color: #1d4ed8
        }

        button.ghost {
            background: transparent;
            border-color: #334155
        }

        button:disabled {
            opacity: .6;
            cursor: not-allowed
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 10px;
            border-radius: 999px;
            background: #0b1220;
            border: 1px solid #1f2937;
            color: #cbd5e1;
            font-size: 12px
        }

        .badge {
            font-weight: 700;
            color: #93c5fd
        }

        .box {
            background: #0b1220;
            border: 1px solid #1f2937;
            border-radius: 16px;
            padding: 16px
        }

        .big {
            font-size: 20px;
            line-height: 1.6
        }

        .muted {
            color: var(--muted)
        }

        .hint {
            color: #a7f3d0
        }

        .id {
            font-variant-numeric: tabular-nums
        }

        .range {
            accent-color: #60a5fa
        }

        .footer {
            margin-top: 22px;
            color: #94a3b8;
            font-size: 12px
        }

        .kbd {
            border: 1px solid #334155;
            background: #0b1220;
            padding: 2px 6px;
            border-radius: 6px;
            font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
            font-size: 12px
        }

        details {
            background: #0b1220;
            border: 1px solid #1f2937;
            border-radius: 16px;
        }

        details>summary {
            padding: 12px 16px;
            cursor: pointer;
            list-style: none;
            font-weight: 700
        }

        details[open]>summary {
            border-bottom: 1px solid #1f2937
        }

        .content {
            padding: 16px
        }

        /* 입력형 빈칸/채점 스타일 */
        .blank {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin: 0 2px
        }

        .blank .first {
            min-width: 0.6em;
            text-align: center
        }

        .blank input {
            background: #0b1220;
            border: 1px solid #334155;
            color: #e5e7eb;
            border-radius: 8px;
            padding: 2px 6px;
            font-size: 18px;
            line-height: 1.4;
            width: auto
        }

        .blank input.good {
            border-color: var(--good);
            box-shadow: 0 0 0 2px rgba(52, 211, 153, .15) inset
        }

        .blank input.bad {
            border-color: var(--bad);
            box-shadow: 0 0 0 2px rgba(248, 113, 113, .12) inset
        }

        .score {
            font-weight: 700
        }

        @media (max-width:760px) {
            .g2 {
                grid-template-columns: 1fr
            }
        }

        .hidden {
            display: none
        }

        .screen-title {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div class="card">

            <!-- 공통 헤더 -->
            <div class="screen-title">
                <h1>CSV 영문 단어 가리기 퀴즈</h1>
                <div class="row">
                    <span class="pill">총 문장 수: <span id="totalCnt">0</span></span>
                </div>
            </div>
            <p class="sub">동일 폴더에 <span class="badge">test.csv</span>가 있으면 자동으로 로드합니다. 없으면 CSV를 직접 선택하세요. 헤더: <span
                    class="kbd">일련번호</span>, <span class="kbd">영문</span>, <span class="kbd">번역</span> (또는 <span
                    class="kbd">id</span>, <span class="kbd">english</span>, <span class="kbd">translation</span>).</p>

            <!-- # 화면 1: 시작 화면 -->
            <section id="screen1">
                <div class="grid g2">
                    <div class="box">
                        <div class="row">
                            <input id="csvFile" type="file" accept=".csv" />
                            <button id="btnDemo" class="ghost">데모 로드</button>
                        </div>
                        <div class="row" style="margin-top:10px">
                            <label for="level">가리기 난이도: <span id="levelLabel" class="hint">30%</span></label>
                            <input id="level" class="range" type="range" min="10" max="80" step="5" value="30" />
                        </div>
                        <div class="row" style="margin-top:6px">
                            <label><input id="keepFirst" type="checkbox" checked /> 단어 첫 글자는 보이기</label>
                            <label style="margin-left:14px"><input id="minLen" type="number" min="1" max="10" value="3"
                                    style="width:64px;"> 글자 이상만 가리기</label>
                        </div>
                    </div>
                    <div class="box">
                        <div class="row">
                            <button id="btnPick" class="primary" disabled>문제 내기</button>
                        </div>
                    </div>
                </div>

                <div style="height:14px"></div>
                <details>
                    <summary>사용법</summary>
                    <div class="content">
                        <ol>
                            <li>동일 폴더의 <b>test.csv</b>가 있으면 자동으로 로드됩니다. 없다면 파일을 직접 선택하거나 <b>데모 로드</b>를 사용하세요.</li>
                            <li>설정을 조정한 뒤 <b>문제 내기</b>를 눌러 퀴즈 화면으로 이동합니다.</li>
                        </ol>
                        <p class="footer">CSV는 UTF-8 권장. 헤더 자동 인식(한/영).</p>
                    </div>
                </details>
            </section>

            <!-- # 화면 2: 퀴즈 화면 -->
            <section id="screen2" class="hidden">
                <div class="box">
                    <div class="row">
                        <button id="btnGrade" disabled>채점</button>
                        <button id="btnReveal" disabled>정답 보기</button>
                        <button id="btnNext" class="primary" disabled>다음 문제</button>
                        <button id="btnHome" class="ghost">첫화면으로</button>
                    </div>
                    <div class="row" style="margin-top:6px">
                        <span class="pill">선택된 일련번호: <span id="selId" class="id">—</span></span>
                        <span class="pill">정답: <span id="scoreCorrect" class="score">0</span>/<span
                                id="scoreTotal">0</span></span>
                    </div>
                </div>

                <div style="height:14px"></div>

                <details open>
                    <summary>문제 영역</summary>
                    <div class="content">
                        <div>
                            <div class="muted">번역(힌트)</div>
                            <div id="ko" class="big">—</div>
                        </div>
                        <div style="height:12px"></div>
                        <div>
                            <div class="muted">영문(빈칸 채우기)</div>
                            <div id="enMask" class="big">—</div>
                        </div>
                        <div id="answerWrap" style="display:none; margin-top:12px">
                            <div class="muted">정답(원문 영문)</div>
                            <div id="enFull" class="big"></div>
                        </div>
                    </div>
                </details>
                <div class="footer">단일 HTML 파일로 오프라인에서도 동작합니다.</div>
            </section>

        </div>
    </div>

    <script type="module">
      import { initQuizApp } from './lib/quiz-app.js';
      // 페이지 로드 후 앱 초기화
      window.addEventListener('DOMContentLoaded', () => {
        initQuizApp();
      });
    </script>

</body>

</html>